<%@ page import="java.io.File" %>
<%@ page import="java.io.FileInputStream" %>
<%@ page import="java.util.regex.Pattern" %>
<%@ page import="java.util.regex.Matcher" %>
<%@ page import="servlet.GlobalContext" %>
<%@ page import="org.springframework.jdbc.core.JdbcTemplate" %>
<%@ page import="javax.sql.DataSource" %>
<%@ page import="com.saille.rm.util.ImdUtils" %>
<%@ page import="java.util.Map" %>
<%@ page import="java.util.List" %>
<%@ page import="java.util.ArrayList" %><%
    List<String[]> list = new ArrayList<String[]>();
    list.add(new String[]{"2", "jinlichao"});
    list.add(new String[]{"3", "misaka"});
    list.add(new String[]{"4", "NOFhigh"});
    list.add(new String[]{"5", "zhongzhuangjibing"});
    list.add(new String[]{"6", "emeraldworldmoguwang"});
    list.add(new String[]{"7", "11shenqu"});
    list.add(new String[]{"8", "jinlichao2"});
    list.add(new String[]{"9", "onlymyrailgun"});
    list.add(new String[]{"10", "lukalukanightfever"});
    list.add(new String[]{"11", "zhuqufeixiang"});
    list.add(new String[]{"12", "huanzangshd"});
    list.add(new String[]{"13", "hundouluo"});
    list.add(new String[]{"14", "chaozairflow"});
    list.add(new String[]{"15", "youngforyou"});
    list.add(new String[]{"16", "qianbenying"});
    list.add(new String[]{"17", "sistersnoise"});
    list.add(new String[]{"18", "yuanzhoulv"});
    list.add(new String[]{"19", "fengyu"});
    list.add(new String[]{"20", "qinglong"});
    list.add(new String[]{"21", "shaonvhigh"});
    list.add(new String[]{"22", "fengyu2"});
    list.add(new String[]{"23", "100animation"});
    list.add(new String[]{"24", "onlymyrailgun2"});
    list.add(new String[]{"25", "weekend"});
    list.add(new String[]{"26", "weire"});
    list.add(new String[]{"27", "100kuai"});
    list.add(new String[]{"28", "overmyhead"});
    list.add(new String[]{"29", "sistersnoisecha"});
    list.add(new String[]{"30", "11eleven"});
    list.add(new String[]{"31", "canon"});
    list.add(new String[]{"32", "qingfang"});
    list.add(new String[]{"33", "maxburing"});
    list.add(new String[]{"34", "xialian"});
    list.add(new String[]{"35", "zhenshisui"});
    list.add(new String[]{"36", "baihu"});
    list.add(new String[]{"37", "tante"});
    list.add(new String[]{"38", "diertiantang"});
    list.add(new String[]{"39", "always"});
    list.add(new String[]{"40", "blackorwhite"});
    list.add(new String[]{"41", "forultraplayers"});
    list.add(new String[]{"42", "fight4real"});
    list.add(new String[]{"43", "maxburing2"});
    list.add(new String[]{"44", "shenjingbing"});
    list.add(new String[]{"45", "zhuque"});
    list.add(new String[]{"46", "littleboy"});
    list.add(new String[]{"47", "dongjingshizhong"});
    list.add(new String[]{"48", "loujian"});
    list.add(new String[]{"49", "xuanwu"});
    list.add(new String[]{"50", "huabanxie"});
    list.add(new String[]{"51", "xiaojixiaoji"});
    list.add(new String[]{"52", "blackrose"});
    list.add(new String[]{"53", "variance"});
    list.add(new String[]{"54", "precipitation"});
    list.add(new String[]{"55", "freedomdive"});
    list.add(new String[]{"56", "crotia3"});
    list.add(new String[]{"57", "adonispk"});
    list.add(new String[]{"58", "yueguangfuqin"});
    list.add(new String[]{"59", "schigh"});
    list.add(new String[]{"60", "crotiacrazy"});
    list.add(new String[]{"61", "nexttoyou"});
    list.add(new String[]{"62", "noble2"});
    list.add(new String[]{"63", "shenshengzhiguangeard"});
    list.add(new String[]{"64", "visitteriventrilo"});
    list.add(new String[]{"65", "youlingxiaowu"});
    list.add(new String[]{"66", "ignite"});
    list.add(new String[]{"67", "crossingfield"});
    list.add(new String[]{"68", "innocence"});
    list.add(new String[]{"69", "nihilism"});
    list.add(new String[]{"70", "jiyunotsubasa"});
    list.add(new String[]{"71", "moonlightsymponia"});
    list.add(new String[]{"72", "thisgame"});
    list.add(new String[]{"73", "thisgamefull"});
    list.add(new String[]{"74", "art"});
    list.add(new String[]{"75", "huoyuanjia"});
    list.add(new String[]{"76", "wandunnimingxin"});
    list.add(new String[]{"77", "aihaanan"});
    list.add(new String[]{"78", "fuxiaodida"});
    list.add(new String[]{"79", "ninetailedfox"});
    list.add(new String[]{"80", "anima"});
    list.add(new String[]{"81", "voiceofpassion"});
    list.add(new String[]{"82", "blackstranger"});
    list.add(new String[]{"83", "erebus"});
    list.add(new String[]{"84", "zhongmeng"});
    list.add(new String[]{"85", "alusudolomelia"});
    list.add(new String[]{"86", "hangover"});
    list.add(new String[]{"87", "risingstar"});
    list.add(new String[]{"88", "xiaopingguo"});
    list.add(new String[]{"89", "examinationleave"});
    list.add(new String[]{"90", "energy"});
    list.add(new String[]{"91", "redzone"});
    list.add(new String[]{"92", "starstream"});
    list.add(new String[]{"93", "sinus"});
    list.add(new String[]{"94", "aluan79"});
    list.add(new String[]{"95", "romanceofdarkness"});
    list.add(new String[]{"96", "snakestick"});
    list.add(new String[]{"97", "huohua"});
    list.add(new String[]{"98", "breakup"});
    list.add(new String[]{"99", "bangbanggroove"});
    list.add(new String[]{"100", "honglian"});
    list.add(new String[]{"101", "lvsebingtuan"});
    list.add(new String[]{"102", "handmadecity"});
    list.add(new String[]{"103", "psimissing"});
    list.add(new String[]{"104", "entrance"});
    list.add(new String[]{"105", "rexuebingqiu"});
    list.add(new String[]{"106", "romancinglayer"});
    list.add(new String[]{"107", "heartofwitch"});
    list.add(new String[]{"108", "convictionmx"});
    list.add(new String[]{"109", "hulangfengliuqu"});
    list.add(new String[]{"110", "shuangchongjiandie"});
    list.add(new String[]{"111", "explosivepart3"});
    list.add(new String[]{"112", "blackparade"});
    list.add(new String[]{"113", "megaburngai"});
    list.add(new String[]{"114", "endoffight"});
    list.add(new String[]{"115", "pumpmeamadeus"});
    list.add(new String[]{"116", "redsign"});
    list.add(new String[]{"117", "heianwangzi"});
    list.add(new String[]{"118", "zuiewangguan"});
    list.add(new String[]{"119", "flowerdance"});
    list.add(new String[]{"120", "newastronomas"});
    list.add(new String[]{"121", "kuai"});
    list.add(new String[]{"122", "liquidremixredo"});
    list.add(new String[]{"123", "summercrazy"});
    list.add(new String[]{"124", "chapter19"});
    list.add(new String[]{"125", "chinadress"});
    list.add(new String[]{"126", "nightmare"});
    list.add(new String[]{"127", "nbranger"});
    list.add(new String[]{"128", "superluminal"});
    list.add(new String[]{"129", "aether"});
    list.add(new String[]{"130", "kuangnuezhile"});
    list.add(new String[]{"131", "pureruby"});
    list.add(new String[]{"132", "cerebrite"});
    list.add(new String[]{"133", "variance2"});
    list.add(new String[]{"134", "inbijabulu"});
    list.add(new String[]{"135", "idola"});
    list.add(new String[]{"136", "banginsburst"});
    list.add(new String[]{"137", "cirno"});
    list.add(new String[]{"138", "ganymedekamomemix"});
    list.add(new String[]{"139", "mononokehime"});
    list.add(new String[]{"140", "hongliancha"});
    list.add(new String[]{"141", "fengyu3"});
    list.add(new String[]{"142", "mowang"});
    list.add(new String[]{"143", "blackbullet"});
    list.add(new String[]{"144", "aftertheending"});
    list.add(new String[]{"145", "braveheart"});
    list.add(new String[]{"146", "isayyes"});
    list.add(new String[]{"147", "purplepassion"});
    list.add(new String[]{"148", "disconnected"});
    list.add(new String[]{"149", "area184"});
    list.add(new String[]{"150", "flower"});
    list.add(new String[]{"151", "dating2chuanshao"});
    list.add(new String[]{"152", "beforesms"});
    list.add(new String[]{"153", "entrance2"});
    list.add(new String[]{"154", "entrance3"});
    list.add(new String[]{"155", "angeldust"});
    list.add(new String[]{"156", "startdash"});
    list.add(new String[]{"157", "huiyecheng"});
    list.add(new String[]{"158", "wodexifashui"});
    list.add(new String[]{"159", "womenshiweilaizhihua"});
    list.add(new String[]{"160", "chaozfantasy"});
    list.add(new String[]{"161", "lostsouls"});
    list.add(new String[]{"162", "hesitationsnow"});
    list.add(new String[]{"163", "yongyeyouxing"});
    list.add(new String[]{"164", "wajueji"});
    list.add(new String[]{"165", "wajuejiredo"});
    list.add(new String[]{"166", "sanqianliqingkong"});
    list.add(new String[]{"167", "butterfly"});
    list.add(new String[]{"168", "oracle"});
    list.add(new String[]{"169", "junwuyu"});
    list.add(new String[]{"170", "snowhalation"});
    list.add(new String[]{"171", "wonderzone"});
    list.add(new String[]{"172", "buanding"});
    list.add(new String[]{"173", "tokyoteddy"});
    list.add(new String[]{"174", "artificialrose"});
    list.add(new String[]{"175", "chiyingremix"});
    list.add(new String[]{"176", "yinghuayue"});
    list.add(new String[]{"177", "friendchuanshao"});
    list.add(new String[]{"178", "tiandikaipi"});
    list.add(new String[]{"179", "junwuyu2"});
    list.add(new String[]{"180", "xiongbenxiong"});
    list.add(new String[]{"181", "goemon"});
    list.add(new String[]{"182", "claiomhsolais"});
    list.add(new String[]{"183", "jinhua"});
    list.add(new String[]{"184", "dayxdayfull"});
    list.add(new String[]{"185", "lisariccia"});
    list.add(new String[]{"186", "dayxdaytv"});
    list.add(new String[]{"187", "disorderfull"});
    list.add(new String[]{"188", "kabaneri"});
    list.add(new String[]{"189", "ikenayi"});
    list.add(new String[]{"190", "pulein"});
    list.add(new String[]{"191", "spicaterrible"});
    list.add(new String[]{"192", "lovelivesuite"});
    list.add(new String[]{"193", "elingyongdong"});
    list.add(new String[]{"194", "baozoudashijian"});
    list.add(new String[]{"195", "heyishengxiaomo"});
    list.add(new String[]{"196", "realparadise"});
    list.add(new String[]{"197", "moonlightdance"});
    list.add(new String[]{"198", "angelicsphere"});
    list.add(new String[]{"199", "anemoneheart"});
    list.add(new String[]{"200", "sangshixueye"});
    list.add(new String[]{"201", "blythe"});
    list.add(new String[]{"202", "knightoffirma"});
    list.add(new String[]{"204", "jinglingjianwuji"});
    list.add(new String[]{"205", "qinglongwater"});
    list.add(new String[]{"206", "butterfly2"});
    list.add(new String[]{"207", "joker"});
    list.add(new String[]{"208", "veritas"});
    list.add(new String[]{"209", "hexad"});
    list.add(new String[]{"210", "gypsytronic"});
    list.add(new String[]{"211", "area7"});
    list.add(new String[]{"212", "cosmos"});
    list.add(new String[]{"213", "aiaepetal"});
    list.add(new String[]{"214", "ai"});
    list.add(new String[]{"215", "aimburst"});
    list.add(new String[]{"216", "cirnobreak"});
    list.add(new String[]{"217", "connect"});
    list.add(new String[]{"218", "solewafengno"});
    list.add(new String[]{"219", "datealive"});
    list.add(new String[]{"220", "desperado"});
    list.add(new String[]{"221", "drg"});
    list.add(new String[]{"222", "evansduanmiantiao"});
    list.add(new String[]{"223", "realjixian"});
    list.add(new String[]{"224", "luminize"});
    list.add(new String[]{"225", "snowstorm"});
    list.add(new String[]{"226", "secretlongquick"});
    list.add(new String[]{"227", "chihei"});
    list.add(new String[]{"228", "yefengfeiwujixian"});
    list.add(new String[]{"229", "qzgy4x"});
    list.add(new String[]{"230", "canonnmhd"});
    list.add(new String[]{"231", "triplejourney"});
    list.add(new String[]{"232", "paraparasakura"});
    list.add(new String[]{"233", "siyecao"});
    list.add(new String[]{"234", "nomoresorrow"});
    list.add(new String[]{"235", "akasha"});
    list.add(new String[]{"236", "fallintothemorion"});
    list.add(new String[]{"237", "weifengtangtang"});
    list.add(new String[]{"238", "realshaonvhuanzang"});
    list.add(new String[]{"239", "zuizhongguichumei"});
    list.add(new String[]{"240", "reunion"});
    list.add(new String[]{"241", "leidegaobai"});
    list.add(new String[]{"242", "shishigui"});
    list.add(new String[]{"243", "dualstriker"});
    list.add(new String[]{"244", "wanglingxuqu"});
    list.add(new String[]{"245", "lunarticdial"});
    list.add(new String[]{"246", "fengyufusang"});
    list.add(new String[]{"247", "judgelight"});
    list.add(new String[]{"248", "aishangniwansui"});
    list.add(new String[]{"249", "magnolia"});
    list.add(new String[]{"250", "nightmare2"});
    list.add(new String[]{"251", "lovenovel"});
    list.add(new String[]{"252", "ascension"});
    list.add(new String[]{"253", "shenglinzhiwu"});
    list.add(new String[]{"254", "mermaidgirl"});
    list.add(new String[]{"255", "ohloveandpeace"});
    list.add(new String[]{"256", "biotonic"});
    list.add(new String[]{"257", "bloodypurity"});
    list.add(new String[]{"258", "grassstodio"});
    list.add(new String[]{"259", "song100"});
    list.add(new String[]{"260", "yekong"});
    list.add(new String[]{"261", "fengshenshaonv"});
    list.add(new String[]{"262", "yinv"});
    list.add(new String[]{"263", "musicstart"});
    list.add(new String[]{"265", "beatinangel"});
    list.add(new String[]{"266", "snowhalation2"});
    list.add(new String[]{"267", "panicholic"});
    list.add(new String[]{"268", "Mmmmmmm"});
    list.add(new String[]{"269", "standalonebeatmasta"});
    list.add(new String[]{"270", "danceallnight"});
    list.add(new String[]{"271", "hifiraver"});
    list.add(new String[]{"272", "chasetheworld"});
    list.add(new String[]{"273", "chineseteaorchidremix"});
    list.add(new String[]{"274", "lifetheory"});
    list.add(new String[]{"275", "emeraldsword"});
    list.add(new String[]{"276", "bspowerbigbang"});
    list.add(new String[]{"278", "lovehurts"});
    list.add(new String[]{"279", "huperioxx"});
    list.add(new String[]{"280", "nekomimi"});
    list.add(new String[]{"281", "weluvlama"});
    list.add(new String[]{"282", "yinghuochongzhiyuan"});
    list.add(new String[]{"283", "conflict"});
    list.add(new String[]{"284", "innocence2"});
    list.add(new String[]{"285", "kozatotsuki"});
    list.add(new String[]{"286", "guernica"});
    list.add(new String[]{"287", "pastthestargazing"});
    list.add(new String[]{"288", "captivatechikai"});
    list.add(new String[]{"289", "freedomdive2"});
    list.add(new String[]{"290", "shinebad"});
    list.add(new String[]{"291", "gateopenerz"});
    list.add(new String[]{"292", "fc"});
    list.add(new String[]{"293", "yulongqishi"});
    list.add(new String[]{"294", "autumnnightii"});
    list.add(new String[]{"295", "100cut"});
    list.add(new String[]{"296", "hackingtothegate"});
    list.add(new String[]{"297", "l2fux"});
    list.add(new String[]{"298", "legendsilde"});
    list.add(new String[]{"299", "spaceofsoul"});
    list.add(new String[]{"300", "noble4"});
    list.add(new String[]{"301", "xueyuehua"});
    list.add(new String[]{"302", "reminiscenceoverture"});
    list.add(new String[]{"303", "hadronstrike"});
    list.add(new String[]{"304", "freedomdive4dimensions"});
    list.add(new String[]{"305", "smgq38"});
    list.add(new String[]{"306", "aiae"});
    list.add(new String[]{"307", "bspowerexplosion"});
    list.add(new String[]{"308", "v3ii"});
    list.add(new String[]{"309", "imissyouosu"});
    list.add(new String[]{"310", "mmmmmmm2"});
    list.add(new String[]{"311", "shaonvqixiangosu"});
    list.add(new String[]{"312", "vajuexing"});
    list.add(new String[]{"313", "selentia"});
    list.add(new String[]{"314", "zuiepiantou"});
    list.add(new String[]{"315", "gott"});
    list.add(new String[]{"316", "nocturnaltype"});
    list.add(new String[]{"317", "baijindisco"});
    list.add(new String[]{"318", "shinkekai"});
    list.add(new String[]{"319", "suitup"});
    list.add(new String[]{"320", "pujin"});
    list.add(new String[]{"321", "ourliveyourlife"});
    list.add(new String[]{"322", "mermaidfestavol2"});
    list.add(new String[]{"323", "fengzidongji"});
    list.add(new String[]{"324", "rubikscubeosu"});
    list.add(new String[]{"325", "yaoweichaqu"});
    list.add(new String[]{"326", "track"});
    list.add(new String[]{"327", "theashtray"});
    list.add(new String[]{"328", "shanghairedtea"});
    list.add(new String[]{"329", "wishing"});
    list.add(new String[]{"330", "bilibili50"});
    list.add(new String[]{"331", "chunju"});
    list.add(new String[]{"332", "children"});
    list.add(new String[]{"333", "wodenaoneilianai"});
    list.add(new String[]{"334", "chunxinbanzou"});
    list.add(new String[]{"335", "quanyutianxia"});
    list.add(new String[]{"336", "orange"});
    list.add(new String[]{"337", "trap"});
    list.add(new String[]{"338", "vanessaosu"});
    list.add(new String[]{"339", "sisterfriendlover"});
    list.add(new String[]{"340", "crepuscularrayosu"});
    list.add(new String[]{"341", "victory"});
    list.add(new String[]{"342", "chuyinlibiao"});
    list.add(new String[]{"343", "shumabaobei"});
    list.add(new String[]{"344", "qijizaixian"});
    list.add(new String[]{"345", "jixian4"});
    list.add(new String[]{"346", "huluwa"});
    list.add(new String[]{"347", "qiangu"});
    list.add(new String[]{"348", "guotexinayi"});
    list.add(new String[]{"349", "weluvlama2"});
    list.add(new String[]{"350", "theblackcase"});
    list.add(new String[]{"351", "troublebusters"});
    list.add(new String[]{"352", "chuaijiji"});
    list.add(new String[]{"353", "huangyan"});
    list.add(new String[]{"354", "qiufen"});
    list.add(new String[]{"355", "kamiula"});
    list.add(new String[]{"356", "titanicsmaneuver"});
    list.add(new String[]{"357", "thewindofgold"});
    list.add(new String[]{"358", "theredcornation"});
    list.add(new String[]{"359", "tszuihouchongji"});
    list.add(new String[]{"360", "saikavera"});
    list.add(new String[]{"361", "ainy"});
    list.add(new String[]{"362", "dianyinzhiwang"});
    list.add(new String[]{"363", "zuiezhihua"});
    list.add(new String[]{"364", "erxiaojie"});
    list.add(new String[]{"365", "feijidazhan"});
    list.add(new String[]{"366", "fengzidongji2"});
    list.add(new String[]{"367", "tiantangzhita"});
    list.add(new String[]{"368", "turnitup"});
    list.add(new String[]{"369", "huaqiangu"});
    list.add(new String[]{"370", "molishanormal"});
    list.add(new String[]{"371", "xienuequ"});
    list.add(new String[]{"372", "yinghuochongyuan"});
    list.add(new String[]{"373", "sparklingdaydream"});
    list.add(new String[]{"374", "guichuyanyangtian"});
    list.add(new String[]{"375", "qinfang"});
    list.add(new String[]{"376", "qilunuo"});
    list.add(new String[]{"377", "quanyutianxia2"});
    list.add(new String[]{"378", "ruheranghaiziaishangxuexi"});
    list.add(new String[]{"379", "qianbenyingyinwu"});
    list.add(new String[]{"380", "qizhongzhiwu"});
    list.add(new String[]{"381", "weiraoxunhui"});
    list.add(new String[]{"382", "qingnigenwozou"});
    list.add(new String[]{"383", "meiguofengzi"});
    list.add(new String[]{"384", "flyingfafnir"});
    list.add(new String[]{"385", "jinlichaoriyu"});
    list.add(new String[]{"386", "yongqireason"});
    list.add(new String[]{"387", "endtime"});
    list.add(new String[]{"388", "storia"});
    list.add(new String[]{"389", "chuyinhead"});
    list.add(new String[]{"390", "paomo"});
    list.add(new String[]{"391", "lianhundun"});
    list.add(new String[]{"392", "shenmingfatiao"});
    list.add(new String[]{"393", "tokyohot"});
    list.add(new String[]{"394", "wanhuajingop1"});
    list.add(new String[]{"395", "wanhuajingop2"});
    list.add(new String[]{"396", "mysister"});
    list.add(new String[]{"397", "railgun"});
    list.add(new String[]{"398", "tianjiangzhiwu"});
    list.add(new String[]{"399", "libiaolover"});
    list.add(new String[]{"400", "kuangnuezhile2"});
    list.add(new String[]{"401", "luoqiusheshoot"});
    list.add(new String[]{"402", "kongbaishaonv"});
    list.add(new String[]{"403", "shabao"});
    list.add(new String[]{"404", "fourseasonwinterremix"});
    list.add(new String[]{"405", "jiuweihu"});
    list.add(new String[]{"406", "100animation2"});
    list.add(new String[]{"407", "aiae2"});
    list.add(new String[]{"408", "theothersosu"});
    list.add(new String[]{"409", "runaway"});
    list.add(new String[]{"410", "yongqireason2"});
    list.add(new String[]{"411", "sanguosha"});
    list.add(new String[]{"412", "qianbenmo"});
    list.add(new String[]{"413", "chemicalstar"});
    list.add(new String[]{"414", "haise"});
    list.add(new String[]{"415", "xiyangyanggailiang"});
    list.add(new String[]{"416", "daojianhearttemp"});
    list.add(new String[]{"417", "talesofginkgo"});
    list.add(new String[]{"418", "lian"});
    list.add(new String[]{"419", "thestorm"});
    list.add(new String[]{"420", "blackhole3"});
    list.add(new String[]{"421", "reborn"});
    list.add(new String[]{"422", "kongbai60"});
    list.add(new String[]{"423", "veritashua"});
    list.add(new String[]{"424", "victory2"});
    list.add(new String[]{"425", "dadehuore"});
    list.add(new String[]{"426", "keguanbukeyi"});
    list.add(new String[]{"427", "beijingdonglu"});
    list.add(new String[]{"428", "oj01"});
    list.add(new String[]{"429", "burstlinker"});
    list.add(new String[]{"430", "jingyinshuangzi"});
    list.add(new String[]{"431", "tsaibomba"});

    Pattern imdpattern = Pattern.compile(".+_([4-6]k)_(ez|nm|hd)(.+)");
    for(int i = 0; i < list.size(); i++) {
        String[] m = list.get(i);
        System.out.println(i + ":"+m[0] + "/"+m[1]);
        int id = Integer.parseInt(m[0]);
        String path = m[1];
        File file = new File("D:\\rm\\zizhi\\" + path);
        File[] subfiles = file.listFiles();
        for(File f : subfiles) {
            if(f.getName().toLowerCase().endsWith(".mp3")) {
                File newFile = new File(f.getParentFile().getCanonicalPath() + File.separator + id + ".mp3");
                f.renameTo(newFile);
            } else if(f.getName().toLowerCase().endsWith(".png")) {
                if(f.getName().contains("_")) {
                    File newFile = new File(f.getParentFile().getCanonicalPath() + File.separator + id + "_title_ipad.png");
                    f.renameTo(newFile);
                } else {
                    File newFile = new File(f.getParentFile().getCanonicalPath() + File.separator + id + ".png");
                    f.renameTo(newFile);
                }
            } else if(f.getName().endsWith(".imd")) {
                Matcher matcher = imdpattern.matcher(f.getName());
                if(matcher.matches()) {
                    File newFile = new File(f.getParentFile().getCanonicalPath() + File.separator + id + "_" + matcher.group(1) + "_" + matcher.group(2) + ".imd");
                    f.renameTo(newFile);
                } else {
                    throw new Exception ("!!!!!!!!!!");
                }
            }
        }
    }
    out.println("done");
%>